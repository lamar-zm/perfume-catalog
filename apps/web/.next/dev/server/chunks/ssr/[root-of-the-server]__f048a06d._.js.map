{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/lamarkhalifa/projects/perfume-catalog/apps/web/src/lib/api.ts"],"sourcesContent":["import type {\n  Perfume,\n  Category,\n  Brand,\n  PaginatedResult,\n  PaginationParams,\n  PerfumeFilters,\n  SortOptions,\n  ApiResponse,\n  AuthResponse,\n  Admin,\n} from '@perfume-catalog/shared';\n\n// Get base URL for API calls (works in both server and client)\nfunction getBaseUrl(): string {\n  // Client-side\n  if (typeof window !== 'undefined') {\n    return '';\n  }\n  // Server-side - use localhost\n  return process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\n}\n\n// Generic fetch helper\nasync function fetchApi<T>(\n  endpoint: string,\n  options?: RequestInit\n): Promise<ApiResponse<T>> {\n  const baseUrl = getBaseUrl();\n  const url = `${baseUrl}/api${endpoint}`;\n  \n  try {\n    const response = await fetch(url, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...options?.headers,\n      },\n      cache: 'no-store', // Disable caching for API routes\n    });\n    return response.json();\n  } catch (error) {\n    console.error(`API Error fetching ${url}:`, error);\n    return { success: false, error: 'Network error' };\n  }\n}\n\n// ============================================\n// Perfume API Client\n// ============================================\nexport const perfumeApi = {\n  async getAll(\n    params: PaginationParams & PerfumeFilters & { search?: string },\n  ): Promise<ApiResponse<PaginatedResult<Perfume>>> {\n    const searchParams = new URLSearchParams({\n      page: params.page.toString(),\n      pageSize: params.pageSize.toString(),\n    });\n\n    if (params.categoryId) searchParams.set('categoryId', params.categoryId);\n    if (params.brandId) searchParams.set('brandId', params.brandId);\n    if (params.hasDiscount) searchParams.set('hasDiscount', 'true');\n    if (params.search) searchParams.set('search', params.search);\n\n    return fetchApi<PaginatedResult<Perfume>>(`/perfumes?${searchParams}`);\n  },\n\n  async getById(id: string): Promise<ApiResponse<Perfume>> {\n    return fetchApi<Perfume>(`/perfumes/${id}`);\n  },\n\n  async getMostSold(limit: number = 8): Promise<ApiResponse<Perfume[]>> {\n    return fetchApi<Perfume[]>(`/perfumes?endpoint=most-sold&limit=${limit}`);\n  },\n\n  async getDiscounted(limit?: number): Promise<ApiResponse<Perfume[]>> {\n    const url = limit ? `/perfumes?endpoint=discounted&limit=${limit}` : '/perfumes?endpoint=discounted';\n    return fetchApi<Perfume[]>(url);\n  },\n\n  async getRelated(perfumeId: string, categoryId: string, limit: number = 4): Promise<ApiResponse<Perfume[]>> {\n    return fetchApi<Perfume[]>(`/perfumes/${perfumeId}?related=true&categoryId=${categoryId}&limit=${limit}`);\n  },\n\n  async create(data: Partial<Perfume>): Promise<ApiResponse<Perfume>> {\n    return fetchApi<Perfume>('/perfumes', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  },\n\n  async update(id: string, data: Partial<Perfume>): Promise<ApiResponse<Perfume>> {\n    return fetchApi<Perfume>(`/perfumes/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n  },\n\n  async delete(id: string): Promise<ApiResponse<{ id: string }>> {\n    return fetchApi<{ id: string }>(`/perfumes/${id}`, { method: 'DELETE' });\n  },\n\n  async updateDiscount(id: string, discount: number): Promise<ApiResponse<Perfume>> {\n    return fetchApi<Perfume>(`/perfumes/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify({ action: 'updateDiscount', discount }),\n    });\n  },\n};\n\n// ============================================\n// Category API Client\n// ============================================\nexport const categoryApi = {\n  async getAll(): Promise<ApiResponse<Category[]>> {\n    return fetchApi<Category[]>('/categories');\n  },\n\n  async getPaginated(params: PaginationParams): Promise<ApiResponse<PaginatedResult<Category>>> {\n    return fetchApi<PaginatedResult<Category>>(\n      `/categories?paginated=true&page=${params.page}&pageSize=${params.pageSize}`\n    );\n  },\n\n  async getById(id: string): Promise<ApiResponse<Category>> {\n    return fetchApi<Category>(`/categories/${id}`);\n  },\n\n  async getBySlug(slug: string): Promise<ApiResponse<Category>> {\n    return fetchApi<Category>(`/categories/${slug}`);\n  },\n\n  async getWithPerfumes(\n    idOrSlug: string,\n    params: PaginationParams\n  ): Promise<ApiResponse<{ category: Category; perfumes: PaginatedResult<Perfume> }>> {\n    return fetchApi<{ category: Category; perfumes: PaginatedResult<Perfume> }>(\n      `/categories/${idOrSlug}?perfumes=true&page=${params.page}&pageSize=${params.pageSize}`\n    );\n  },\n\n  async create(data: Partial<Category>): Promise<ApiResponse<Category>> {\n    return fetchApi<Category>('/categories', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  },\n\n  async update(id: string, data: Partial<Category>): Promise<ApiResponse<Category>> {\n    return fetchApi<Category>(`/categories/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n  },\n\n  async delete(id: string): Promise<ApiResponse<{ id: string }>> {\n    return fetchApi<{ id: string }>(`/categories/${id}`, { method: 'DELETE' });\n  },\n};\n\n// ============================================\n// Brand API Client\n// ============================================\nexport const brandApi = {\n  async getAll(): Promise<ApiResponse<Brand[]>> {\n    return fetchApi<Brand[]>('/brands');\n  },\n\n  async getPaginated(params: PaginationParams): Promise<ApiResponse<PaginatedResult<Brand>>> {\n    return fetchApi<PaginatedResult<Brand>>(\n      `/brands?paginated=true&page=${params.page}&pageSize=${params.pageSize}`\n    );\n  },\n\n  async getById(id: string): Promise<ApiResponse<Brand>> {\n    return fetchApi<Brand>(`/brands/${id}`);\n  },\n\n  async getBySlug(slug: string): Promise<ApiResponse<Brand>> {\n    return fetchApi<Brand>(`/brands/${slug}`);\n  },\n\n  async getWithPerfumes(\n    idOrSlug: string,\n    params: PaginationParams\n  ): Promise<ApiResponse<{ brand: Brand; perfumes: PaginatedResult<Perfume> }>> {\n    return fetchApi<{ brand: Brand; perfumes: PaginatedResult<Perfume> }>(\n      `/brands/${idOrSlug}?perfumes=true&page=${params.page}&pageSize=${params.pageSize}`\n    );\n  },\n\n  async create(data: Partial<Brand>): Promise<ApiResponse<Brand>> {\n    return fetchApi<Brand>('/brands', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  },\n\n  async update(id: string, data: Partial<Brand>): Promise<ApiResponse<Brand>> {\n    return fetchApi<Brand>(`/brands/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n  },\n\n  async delete(id: string): Promise<ApiResponse<{ id: string }>> {\n    return fetchApi<{ id: string }>(`/brands/${id}`, { method: 'DELETE' });\n  },\n};\n\n// ============================================\n// Auth API Client\n// ============================================\nexport const authApi = {\n  async signIn(email: string, password: string): Promise<ApiResponse<AuthResponse>> {\n    return fetchApi<AuthResponse>('/auth', {\n      method: 'POST',\n      body: JSON.stringify({ email, password }),\n    });\n  },\n\n  async getCurrentUser(): Promise<ApiResponse<Admin>> {\n    return fetchApi<Admin>('/auth');\n  },\n\n  async signOut(): Promise<ApiResponse<void>> {\n    return fetchApi<void>('/auth', { method: 'DELETE' });\n  },\n};\n\n// ============================================\n// Discount API Client\n// ============================================\nexport const discountApi = {\n  async getAll(limit?: number): Promise<ApiResponse<Perfume[]>> {\n    const url = limit ? `/discounts?limit=${limit}` : '/discounts';\n    return fetchApi<Perfume[]>(url);\n  },\n\n  async apply(perfumeId: string, discount: number): Promise<ApiResponse<Perfume>> {\n    return fetchApi<Perfume>('/discounts', {\n      method: 'POST',\n      body: JSON.stringify({ perfumeId, discount }),\n    });\n  },\n\n  async remove(perfumeId: string): Promise<ApiResponse<Perfume>> {\n    return fetchApi<Perfume>('/discounts', {\n      method: 'DELETE',\n      body: JSON.stringify({ perfumeId }),\n    });\n  },\n};\n\n// ============================================\n// Image Helper\n// ============================================\nexport const imageHelper = {\n  getPlaceholder(width: number = 400, height: number = 400): string {\n    return `https://placehold.co/${width}x${height}/e9d5ff/6b21a8?text=عطر`;\n  },\n};\n\n// ============================================\n// Upload API Client\n// ============================================\nexport const uploadApi = {\n  async upload(file: File): Promise<ApiResponse<{ url: string; filename: string }>> {\n    const baseUrl = getBaseUrl();\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const response = await fetch(`${baseUrl}/api/upload`, {\n        method: 'POST',\n        body: formData,\n      });\n      return response.json();\n    } catch (error) {\n      console.error('Upload error:', error);\n      return { success: false, error: 'فشل رفع الملف' };\n    }\n  },\n\n  async delete(filename: string): Promise<ApiResponse<{ filename: string }>> {\n    const baseUrl = getBaseUrl();\n    try {\n      const response = await fetch(`${baseUrl}/api/upload`, {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ filename }),\n      });\n      return response.json();\n    } catch (error) {\n      console.error('Delete error:', error);\n      return { success: false, error: 'فشل حذف الملف' };\n    }\n  },\n\n  async uploadMultiple(files: File[]): Promise<ApiResponse<{ urls: string[] }>> {\n    const results: string[] = [];\n    const errors: string[] = [];\n\n    for (const file of files) {\n      const result = await this.upload(file);\n      if (result.success && result.data) {\n        results.push(result.data.url);\n      } else {\n        errors.push(result.error || 'Upload failed');\n      }\n    }\n\n    if (errors.length > 0 && results.length === 0) {\n      return { success: false, error: errors.join(', ') };\n    }\n\n    return { success: true, data: { urls: results } };\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///Users/lamarkhalifa/projects/perfume-catalog/apps/web/src/services/index.ts"],"sourcesContent":["// Re-export API client functions\nexport { \n  perfumeApi,\n  categoryApi,\n  brandApi,\n  authApi,\n  discountApi,\n  imageHelper,\n  uploadApi,\n} from '@/lib/api';\n\n// Also export with old service names for backward compatibility\nexport { \n  perfumeApi as perfumeService,\n  categoryApi as categoryService,\n  brandApi as brandService,\n  authApi as authService,\n  discountApi as discountService,\n  imageHelper as imageService,\n  uploadApi as uploadService,\n} from '@/lib/api';\n"],"names":[],"mappings":";AAAA,iCAAiC;AACjC"}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///Users/lamarkhalifa/projects/perfume-catalog/apps/web/src/components/perfume/PerfumeCarousel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/apps/web/src/components/perfume/PerfumeCarousel.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/perfume/PerfumeCarousel.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuT,GACpV,qFACA","ignoreList":[0]}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["file:///Users/lamarkhalifa/projects/perfume-catalog/apps/web/src/components/perfume/PerfumeCarousel.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/apps/web/src/components/perfume/PerfumeCarousel.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/src/components/perfume/PerfumeCarousel.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAmS,GAChU,iEACA","ignoreList":[0]}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///Users/lamarkhalifa/projects/perfume-catalog/apps/web/src/app/%28public%29/perfume/%5Bid%5D/page.tsx"],"sourcesContent":["import { Metadata } from 'next';\nimport { notFound } from 'next/navigation';\nimport {\n  Stack,\n  Grid,\n  GridCol,\n  Title,\n  Text,\n  Badge,\n  Group,\n  Box,\n  Paper,\n  Divider,\n} from '@mantine/core';\nimport { IconTag, IconCategory } from '@tabler/icons-react';\nimport { perfumeApi, categoryApi, imageHelper } from '@/services';\nimport { PerfumeGrid, SectionHeader } from '@/components';\nimport PerfumeCarousel from '@/components/perfume/PerfumeCarousel';\n\ninterface PerfumePageProps {\n  params: Promise<{ id: string }>;\n}\n\n// Generate static params for all perfumes\nexport async function generateStaticParams() {\n  const res = await perfumeApi.getAll({ page: 1, pageSize: 100 });\n  if (!res.success) return [];\n  return res.data.data.map((perfume) => ({\n    id: perfume.id,\n  }));\n}\n\n// Generate metadata for each perfume\nexport async function generateMetadata({\n  params,\n}: PerfumePageProps): Promise<Metadata> {\n  const { id } = await params;\n  const res = await perfumeApi.getById(id);\n\n  if (!res.success || !res.data) {\n    return {\n      title: 'العطر غير موجود',\n    };\n  }\n\n  const perfume = res.data;\n  const hasDiscount = perfume.discount && perfume.discount > 0;\n  const finalPrice = hasDiscount ? perfume.price - perfume.discount! : perfume.price;\n  const mainImage = perfume.images?.[0] || '';\n\n  return {\n    title: perfume.title,\n    description: perfume.description.substring(0, 160),\n    openGraph: {\n      title: `${perfume.title} | عطور فاخرة`,\n      description: perfume.description.substring(0, 160),\n      images: mainImage ? [{ url: mainImage }] : undefined,\n      type: 'website',\n    },\n    other: {\n      'product:price:amount': finalPrice.toString(),\n      'product:price:currency': 'IQD',\n    },\n  };\n}\n\nexport default async function PerfumePage({ params }: PerfumePageProps) {\n  const { id } = await params;\n  const perfumeRes = await perfumeApi.getById(id);\n\n  if (!perfumeRes.success || !perfumeRes.data) {\n    notFound();\n  }\n\n  const perfume = perfumeRes.data;\n\n  const [categoryRes, relatedRes, categoriesRes] = await Promise.all([\n    perfume.categoryId ? categoryApi.getById(perfume.categoryId) : Promise.resolve({ success: false, data: null }),\n    perfumeApi.getRelated(perfume.id, perfume.categoryId || '', 4),\n    categoryApi.getAll(),\n  ]);\n\n  const category = categoryRes.success ? categoryRes.data : null;\n  const relatedPerfumes = relatedRes.success ? relatedRes.data : [];\n  const categories = categoriesRes.success ? categoriesRes.data : [];\n\n  const hasDiscount = perfume.discount && perfume.discount > 0;\n  const finalPrice = hasDiscount ? perfume.price - perfume.discount! : perfume.price;\n  const mainImage = perfume.images?.[0] || '';\n\n  return (\n    <Stack gap=\"xl\">\n      {/* Product Details */}\n      <Paper p=\"xl\" radius=\"lg\" withBorder>\n        <Grid gutter=\"xl\">\n          {/* Product Image */}\n          <GridCol span={{ base: 12, md: 5 }}>\n            <Box pos=\"relative\">\n              <PerfumeCarousel images={perfume.images || []} coverImage={perfume.coverImage} height={500} />\n              {hasDiscount && (\n                <Badge\n                  color=\"red\"\n                  variant=\"filled\"\n                  size=\"lg\"\n                  pos=\"absolute\"\n                  top={16}\n                  right={16}\n                >\n                  خصم {perfume.discount} دينار\n                </Badge>\n              )}\n            </Box>\n          </GridCol>\n\n          {/* Product Info */}\n          <GridCol span={{ base: 12, md: 7 }}>\n            <Stack gap=\"md\">\n              {/* Category Badge */}\n              {category && (\n                <Badge\n                  variant=\"light\"\n                  color=\"brand\"\n                  size=\"lg\"\n                  leftSection={<IconCategory size={14} />}\n                >\n                  {category.name}\n                </Badge>\n              )}\n\n              {/* Gender Badge */}\n              {perfume.gender && (\n                <Badge variant=\"light\" color=\"violet\" size=\"lg\">\n                  {perfume.gender === 'men' ? 'للرجال' : perfume.gender === 'women' ? 'للنساء' : 'مناسب للجنسين'}\n                </Badge>\n              )}\n\n              {/* Title */}\n              <Title order={1}>{perfume.title}</Title>\n\n              {/* Price */}\n              <Box>\n                {hasDiscount ? (\n                  <Group gap=\"md\" align=\"baseline\">\n                    <Text fw={700} size=\"2rem\" c=\"brand\">\n                      {finalPrice} د.ع\n                    </Text>\n                    <Text td=\"line-through\" c=\"dimmed\" size=\"xl\">\n                      {perfume.price} د.ع\n                    </Text>\n                    <Badge color=\"red\" variant=\"light\">\n                      وفر {perfume.discount} دينار\n                    </Badge>\n                  </Group>\n                ) : (\n                  <Text fw={700} size=\"2rem\" c=\"brand\">\n                    {perfume.price} د.ع\n                  </Text>\n                )}\n              </Box>\n\n              <Divider />\n\n              {/* Description */}\n              <Box>\n                <Text fw={600} mb=\"xs\">\n                  الوصف\n                </Text>\n                <Text c=\"dimmed\" style={{ lineHeight: 1.8 }}>\n                  {perfume.description}\n                </Text>\n              </Box>\n\n              <Divider />\n\n              {/* Perfume Notes */}\n              {perfume.notes && perfume.notes.length > 0 && (\n                <Box>\n                  <Text fw={600} mb=\"xs\">\n                    نوع العطر\n                  </Text>\n                  <Group gap=\"xs\">\n                    {perfume.notes.map((note, index) => (\n                      <Badge key={index} variant=\"light\" color=\"grape\" size=\"lg\">\n                        {note}\n                      </Badge>\n                    ))}\n                  </Group>\n                </Box>\n              )}\n\n              <Divider />\n\n              {/* Availability */}\n              <Group gap=\"xl\">\n                <Group gap=\"xs\">\n                  <IconTag size={20} color=\"var(--mantine-color-brand-6)\" />\n                  <Text size=\"sm\">\n                    {perfume.outOfStock ? 'غير متوفر حالياً' : 'متوفر في المخزون'}\n                  </Text>\n                </Group>\n              </Group>\n            </Stack>\n          </GridCol>\n        </Grid>\n      </Paper>\n\n      {/* Related Perfumes */}\n      {relatedPerfumes.length > 0 && (\n        <Box>\n          <SectionHeader\n            title=\"عطور مشابهة\"\n            subtitle={`المزيد من ${category?.name || 'هذا التصنيف'}`}\n            viewAllLink={category ? `/category/${category.slug}` : undefined}\n          />\n          <PerfumeGrid\n            perfumes={relatedPerfumes}\n            categories={categories}\n            columns={{ base: 1, sm: 2, md: 2, lg: 4 }}\n          />\n        </Box>\n      )}\n    </Stack>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}